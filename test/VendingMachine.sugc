#import "model/Statemachine"
#include <stdio.h>

statemachine {
	initial state Idle 
	
	data {
		int coins = 0;
		int productsSold = 0;
	}
	
	init {
  		printf("Initialize\n");
  	}

  	events InsertCoin, Abort, Confirm, TakeProduct

  	state Idle {
  		enter { printf("Enter state 'Idle'.\n"); }
  		exit { printf("Exit state 'Idle'.\n"); }
    	InsertCoin => CoinInserted
    	Abort => Idle
  	} 
  	state CoinInserted { 
  		enter { coins++; }
  		Confirm => GiveProduct
  		InsertCoin => CoinInserted
    	Abort => Idle
  	}
  	state GiveProduct {
  		enter { productsSold++; }
    	TakeProduct => Idle
  	}

}